# Description

This directory contains example Nextflow code for all TOGA2 parallel steps. By default, all of these files are generated by TOGA2 on the fly at `nextflow/` directory. Alternatively, you can provide custom configurations/scripts, either by filling in the boilerplates in this directory or by writing your own files.

>[!TIP]
>TOGA2 does not use the files from this directory for Nextflow configuration, so you can safely fill the boilerplates inplace. 

## Configuration files

Configuration files for each alignment step have the `.config` extension.
* `preprocessing.config` - for preprocessing step;
* `alignment_${x}.confifg` - for each of alignment steps memory buckets, where `${x}` is bucket memory limit, GB (for example, `alignment_3.config` stands for <3Gb bucket)
* `orthology.config` for gene tree-based orthology resolution

>[!NOTE]
>Config files listed in this directory are boilerplates and <u>should not</u> be used as TOGA2 input as-is. For example, in line 
>```
>process.executor = "{}"
>```
>, `{}` should be replaced with an actual Nextflow executor name. e.g., `slurm`.

To configure parallel steps with custom files, provide a path to a directory with configuration file with `--nextflow_config_dir` argument. You do not have to manually configure all the parallel steps, nor do you have to create a separate dedicated directory; all files differing from the name templates above are ignored, and steps with missing configuration files are set up with default/command line values (see below).

>[!NOTE]
>Each alignment memory bucket must have its own configuration file: `alignment_3.config` for <3 GB bucket, `alignment_5.config` for <5GB, etc. If a bucket does not have an associated configuration file for a bucket,  generic configuration is used.


## Executor script
`execute_joblist.nf` is an example Nextflow script used for parallel job list execution. You can provide

## Command line configuration
Boilerplates presented in this directory correspond to minimal Nextflow configuration files generated by TOGA2. As such, each of the used parameters has a default value used by TOGA2 which can be modified via command line settings. Consult the 'Parallel execution' section of `toga2.py run` help message for argument names and default values used.

>[!NOTE]
>Arguments provided via command line apply to <u>all</u> parallel steps. For example, if you set `--max_parallel_time` to 12 hours, maximum queue time will be set to 12 hours for all parallel step and all alignment memory bins unless overwritten by configuration files.