{% set np = numpy %}

package:
  name: toga2
  version: 2.0.6
  summary: Tool to infer Orthologs from Genome Alignment, version 2
  dev_url: https://github.com/hillerlab/TOGA2
  doc_ur: https://github.com/hillerlab/TOGA2/wiki

channels:
  - conda-forge
  - bioconda

source:
  path: .
  #git_rev: main
  #git_url: https://github.com/hillerlab/TOGA2

build:
  number: 0
  # Enable NumPy build variants
  skip: false

requirements:
  build:
    - python
    - setuptools
    - gcc
    - conda-forge::rust
    - bash
    - cython
    - cmake
    - conda-forge::maturin

  host:
    - python
    - gcc
    - conda-forge::rust
    - cython
    - rust
    - conda-forge::maturin

  run:
    - python
    - conda-forge::rust
    - bioconda::nextflow
    - bash
    - cython
    - conda-forge::maturin
    - filelock
    - click==8.1.8 
    - click-option-group==0.5.6
    - joblib==1.4.2
    - h5py==3.12.1
    {% if np.startswith("1") %}
    - pandas<2.2.2
    - conda-forge::numexpr<2.10.0 
    - scikit-learn<1.4.2
    - scipy<1.13.0
    - networkx<3.3
    - xgboost<2.1.0 
    - contourpy<1.2.1
    - conda-forge::tensorflow<=2.19.1
    {% else %}
    - pandas>=2.2.2
    - conda-forge::numexpr>=2.10.0 
    - scikit-learn>=1.4.2
    - scipy>=1.13.0 
    - networkx>=3.3
    - xgboost>=2.1.0 
    - cython>=3.0.4
    - contourpy>=1.2.1
    {% endif %}

# outputs:
#     - name: toga2
#       requirements:
#         host:
#           - numpy>=1.10,<2
#         run:
#           - numpy>=1.10,<2
#           - filelock
#           - click==8.1.8 
#           - click-option-group==0.5.6
#           - joblib==1.4.2
#           - h5py==3.12.1
#           - pandas<2.2.2
#           - conda-forge::numexpr<2.10.0 
#           - scikit-learn<1.4.2
#           - scipy<1.13.0
#           - networkx<3.3
#           - xgboost<2.1.0 
#           - contourpy<1.2.1
#           - conda-forge::tensorflow<=2.19.1
          # - spliceai==1.3.1 ## requires separate installation
          # - biogl==2.3.0 ## requires separate installation
    #       - biopython>=1.85
    #       - matplotlib
    #   about:
    #     summary: "TOGA2 build for Numpy versions < 2"
    # - name: toga2
    #   requirements:
    #     build:
    #       - cython>=3.0.4
    #     run:
    #       - numpy>=2
    #       - filelock
    #       - click==8.1.8 
    #       - click-option-group==0.5.6
    #       - joblib==1.4.2
    #       - h5py==3.12.1
    #       - pandas>=2.2.2
    #       - conda-forge::numexpr>=2.10.0 
    #       - scikit-learn>=1.4.2
    #       - scipy>=1.13.0 
    #       - networkx>=3.3
    #       - xgboost>=2.1.0 
    #       - cython>=3.0.4
    #       - contourpy>=1.2.1
    #       - biopython>=1.85
    #       - matplotlib
    #   about:
    #     summary: "TOGA2 build for Numpy versions >= 2"


about:
  home: https://github.com/hillerlab/TOGA2